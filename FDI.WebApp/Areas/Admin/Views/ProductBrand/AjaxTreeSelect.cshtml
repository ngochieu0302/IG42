@model FDI.Simple.ModelProductBrandItem
@{
    ViewBag.Title = ViewBag.ActionText + " sản phẩm";
    Layout = "~/Areas/Admin/Views/Shared/_Ajax.cshtml";
}
<script type="text/javascript">
    $(document).ready(function () {

        var textContainer = "#Text_@Model.Container";
        var hiddenContainer = "#Value_@Model.Container";
        var m = '@Model.SelectMutil';
        if (m != 'True' || m != 'true') {
            $("#SelectTreeCategory input[type=checkbox]").click(function() {
                var lastCheck = $(this).is(':checked');
                $("#SelectTreeCategory input[type=checkbox]").attr('checked', false);
                $(this).attr('checked', lastCheck);
            });
        }
        

        $("#SelectTreeCategory").treeview({
            collapsed:true,
            animated: "medium",
            control: "#SelectTreeControl",
            persist: "location"
        });


        $("#CategoryTreeSelectForm").validate({
            rules: {
                NewsTitle:
                {
                    required: true,
                    minlength: 3,
                    maxlength: 100
                },
                NewsDescription:
                {
                    minlength: 15,
                    maxlength: 2000
                }
            },
            submitHandler: function () { //onSubmit
                var values = '';
                var text = '';
                $("#SelectTreeCategory input[type=checkbox]:checked").each(function(){
                    values += "," + $(this).val();
                    text += ", " + $(this).attr("title");
                });

                if(values != '')
                {
                    $(textContainer).html(text.substring(1));
                    $(hiddenContainer).val(values.substring(1));
                    $("#dialog-form-2").dialog('close');
                }
                else
                {
                    createMessage("Thông báo", "Chưa có thương hiệu nào được chọn"); // Tạo thông báo lỗi
                }
                return false;
            }
        });

        $("#TreeSelectclose").click(function () {
            $("#dialog-form-2").html("").dialog('close');
        });
    });
</script>

<form id="CategoryTreeSelectForm">
    <div class="modal-body">
        <table class="tableforms" cellspacing="1" width="100%">
            <tr>
                <td>
                    <div id="SelectTreeControl" class="treeTool">
                        <a title="Đóng tất cả các nhánh" href="#" class="collapse">Đóng tất cả</a>
                        <a title="Mở tất cả các nhánh" href="#" class="expand">Mở tất cả</a>
                    </div>
                    <ul id="SelectTreeCategory" class="filetree" style="border:0px;">
                        @Html.Raw(Model.PageHtml)
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="submit">
                    <button id="TreeSelectsubmit" type="submit" class="btn btn-sm btn-primary">Chọn</button>
                    <button id="TreeSelectreset" type="reset" class="btn btn-sm btn-primary">Chọn lại</button>
                    <button id="TreeSelectclose" type="button" class="btn btn-sm btn-primary">Đóng lại</button>
                </td>
            </tr>
        </table>
    </div>
    <div class="modal-footer">
        <button id="TreeSelectsubmit" type="submit" class="btn btn-sm btn-primary">Chọn</button>
        <button id="TreeSelectreset" type="reset" class="btn btn-sm btn-primary">Chọn lại</button>
        <button id="TreeSelectclose" type="button" class="btn btn-sm btn-primary">Đóng lại</button>
    </div>
</form>
