@model List<FDI.Simple.AgencyItem>
@{
    Layout = "~/Views/Shared/_LayoutNew.cshtml";
    var date = DateTime.Now;
}



<div class="header-control">
    <h3 class="page-title"></h3>
    <div class="group-form-control">
        <form id="gridSearch" class="form-inline" role="form">
            <div class="form-group">
                <select id="AgencyID" name="AgencyID" class="select2 form-control">
                    @foreach(var item in Model) 
                    {
                        <option value="@item.ID">@item.Name</option>
                    }
                </select>
            </div>
            <div class="form-group">
                <select id="MonthId" name="year" class="select2 form-control">
                    @for (var i = date.Year - 2; i < date.Year + 3; i++)
                    {
                        <option @(i == date.Year ? "selected" : "") value="@i">@i</option>
                    }
                </select>
            </div>
            <button name="submit.Search" type="submit" class="btn btn-sm btn-primary"><span class="fa fa-search"></span>Tìm kiếm</button>
        </form>
    </div>
</div>
<div class="content-control" id="Griditems">
</div>
<script type="text/javascript">
    urlLists = '@Url.Action("ListItems", "GeneralMonthAgency")';
    $(document).ready(function () {
        callSelect2("#MonthId", "90px");
        initAjaxLoad(urlLists + "?id=" + $("#AgencyID").val() + "&year=" + $("#MonthId").val(), "#Griditems");
        $("#gridSearch").submit(function (e) {
            e.preventDefault();
            $.post(urlLists + "?id=" + $("#AgencyID").val() + "&year=" + $("#MonthId").val(), function (data) {
                $("#Griditems").html(data);
            });
        });
    });

</script>